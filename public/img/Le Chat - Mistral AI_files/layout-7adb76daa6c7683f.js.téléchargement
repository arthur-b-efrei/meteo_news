(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96],{52505:function(e,t,a){"use strict";var n,r=a(52846);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),n||(n=r.createElement("path",{d:"M18.353 7.574a.5.5 0 0 0-.707-.008L9.84 15.373l-3.487-3.486a.5.5 0 0 0-.707.707l3.84 3.84a.5.5 0 0 0 .707 0l8.16-8.16a.5.5 0 0 0 0-.7"})))}},73218:function(e,t,a){"use strict";var n,r=a(52846);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),n||(n=r.createElement("path",{d:"M19.853 19.147 12.707 12l7.146-7.147a.5.5 0 0 0-.707-.707L12 11.293 4.853 4.147a.5.5 0 0 0-.707.707L11.293 12l-7.147 7.146a.5.5 0 1 0 .707.707L12 12.707l7.146 7.147a.5.5 0 0 0 .707 0 .5.5 0 0 0 0-.707"})))}},38313:function(e,t,a){"use strict";var n,r=a(52846);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),n||(n=r.createElement("path",{d:"m13.146 15.807-4.17 4.17a3.502 3.502 0 0 1-4.953-4.954l4.17-4.17.008-.007a.5.5 0 0 0-.715-.7l-4.17 4.17A4.499 4.499 0 0 0 6.5 22a4.5 4.5 0 0 0 3.184-1.315l4.17-4.17.007-.007a.5.5 0 0 0-.715-.7m7.538-12.5a4.5 4.5 0 0 0-6.368.01l-4.17 4.17-.007.007a.5.5 0 0 0 .715.7l4.17-4.17a3.502 3.502 0 0 1 4.953 4.953l-4.17 4.17a.5.5 0 1 0 .707.707l4.17-4.17.008-.009a4.5 4.5 0 0 0-.008-6.367m-6.538 5.84-5 5a.5.5 0 1 0 .707.706l5-5a.5.5 0 0 0-.707-.707"})))}},31062:function(e,t,a){"use strict";var n,r=a(52846);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),n||(n=r.createElement("path",{d:"M19 3H5a3 3 0 0 0-3 3c0 1.304.837 2.403 2 2.816V18.5A2.5 2.5 0 0 0 6.5 21h11a2.5 2.5 0 0 0 2.5-2.5V8.816A2.99 2.99 0 0 0 22 6a3 3 0 0 0-3-3m0 15.5c0 .828-.672 1.5-1.5 1.5h-11c-.828 0-1.5-.672-1.5-1.5V9h14zM19 8H5a2 2 0 0 1 0-4h14a2 2 0 0 1 0 4m-9.5 5h5a.5.5 0 0 0 0-1h-5a.5.5 0 0 0 0 1"})))}},74983:function(e,t,a){"use strict";var n,r=a(52846);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),n||(n=r.createElement("path",{d:"M20.5 6H16V4.5A2.5 2.5 0 0 0 13.5 2h-3A2.5 2.5 0 0 0 8 4.5V6H3.5a.5.5 0 0 0 0 1H5v12.5A2.5 2.5 0 0 0 7.5 22h9a2.5 2.5 0 0 0 2.5-2.5V7h1.5a.5.5 0 0 0 0-1M9 4.5c0-.828.672-1.5 1.5-1.5h3c.828 0 1.5.672 1.5 1.5V6H9zm9 15c0 .828-.672 1.5-1.5 1.5h-9c-.828 0-1.5-.672-1.5-1.5V7h12zM9.5 18a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-1 0v7a.5.5 0 0 0 .5.5m5 0a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-1 0v7a.5.5 0 0 0 .5.5"})))}},86847:function(e,t,a){Promise.resolve().then(a.t.bind(a,81749,23)),Promise.resolve().then(a.t.bind(a,25250,23)),Promise.resolve().then(a.bind(a,12177)),Promise.resolve().then(a.bind(a,2176)),Promise.resolve().then(a.bind(a,17711)),Promise.resolve().then(a.bind(a,99975)),Promise.resolve().then(a.bind(a,83675)),Promise.resolve().then(a.bind(a,84546)),Promise.resolve().then(a.bind(a,58051))},12177:function(e,t,a){"use strict";a.r(t),a.d(t,{Commands:function(){return i}});var n=a(57437),r=a(47907),s=a(2265),l=a(98383);function i(){let e=(0,r.useRouter)(),t=l.zw.use.toggleSidePanel();return(0,s.useEffect)(()=>{let a=a=>{(a.metaKey||a.ctrlKey)&&("b"===a.key&&(a.preventDefault(),t()),"n"===a.key&&(a.preventDefault(),e.push("/chat")))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]),(0,n.jsx)(n.Fragment,{})}},2176:function(e,t,a){"use strict";a.r(t),a.d(t,{ChatsList:function(){return E}});var n,r,s=a(57437),l=a(18994),i=a(53879),o=a(575),c=a(32414),u=a(47907),d=a(30982),f=a(22782),m=a(2265),h=a(74961),g=a(8792),p=a(65950),x=a(74983),v=a(52505),w=a(73218),b=a(31062),j=a(52846);function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var N=function(e){return j.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),n||(n=j.createElement("path",{d:"M21.5 11.5a.5.5 0 0 0-.5.5 9.02 9.02 0 1 1-1.502-5H16.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-1 0v2.497A10 10 0 0 0 12.025 2C6.502 1.993 2.02 6.465 2.013 11.987S6.477 21.993 12 22c5.52-.006 9.994-4.48 10-10a.5.5 0 0 0-.5-.5"})))},A=a(13994);function P(e){let{currentChatId:t,targetChatId:a,title:n,content:r,onArchive:l,onRestore:i,onDelete:c}=e,u=(0,A.U0)(),[d,f]=(0,m.useState)(!1),j=!(0,h.ac)("(min-width: 640px)");return(0,s.jsxs)("div",{className:(0,p.cn)("flex min-h-7 w-full shrink-0 flex-row items-center justify-between rounded-lg sm:min-h-6",j?"":"group",t===a?"bg-muted text-primary":""),children:[(0,s.jsxs)(g.default,{"aria-label":"Open chat",href:"/chat/".concat(a),className:(0,p.cn)("block min-h-8 w-full flex-1 flex-row items-center justify-between truncate rounded px-2 py-2 text-sm font-normal",j?"":"group-hover:opacity-70"),onClick:()=>{null==u||u.capture("open_chat",{new_chat_id:a})},children:[n,r&&(0,s.jsx)("div",{className:"mb-2 truncate text-xs text-muted-foreground",children:r})]}),d?(0,s.jsxs)("div",{className:"ml-2 flex flex-row items-center justify-center gap-2",children:[(0,s.jsx)(o.z,{"aria-label":"Cancel",size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full p-0 text-muted-foreground sm:h-6 sm:w-6",onClick:e=>{e.preventDefault(),e.stopPropagation(),f(!1)},children:(0,s.jsx)(w.Z,{className:"h-4 w-4 fill-accent-foreground sm:h-3 sm:w-3"})}),(0,s.jsx)(o.z,{"aria-label":"Delete",size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full p-0 text-muted-foreground sm:h-6 sm:w-6",onClick:e=>{e.preventDefault(),e.stopPropagation(),c()},children:(0,s.jsx)(v.Z,{className:"h-5 w-5 fill-accent-foreground sm:h-4 sm:w-4"})})]}):(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)(o.z,{"aria-label":"Archive",variant:"ghost",className:(0,p.cn)("m-0 flex h-8 w-8 min-w-8 items-center justify-center rounded-full p-0 text-muted-foreground sm:hidden sm:h-6 sm:w-6 sm:min-w-6",j?"":"sm:group-hover:flex",t===a?"flex":"hidden"),onClick:e=>{e.preventDefault(),e.stopPropagation(),l()},children:(0,s.jsx)(b.Z,{className:"h-5 w-5 fill-accent-foreground sm:h-4 sm:w-4"})}),i&&(0,s.jsx)(o.z,{"aria-label":"Archive",variant:"ghost",className:(0,p.cn)("m-0 flex h-8 w-8 min-w-8 items-center justify-center rounded-full p-0 text-muted-foreground sm:hidden sm:h-6 sm:w-6 sm:min-w-6",j?"":"sm:group-hover:flex",t===a?"flex":"hidden"),onClick:e=>{e.preventDefault(),e.stopPropagation(),i()},children:(0,s.jsx)(N,{className:"h-5 w-5 fill-accent-foreground sm:h-4 sm:w-4"})}),(0,s.jsx)(o.z,{"aria-label":"Delete",variant:"ghost",className:(0,p.cn)("m-0 flex h-8 w-8 min-w-8 items-center justify-center rounded-full p-0 text-muted-foreground sm:hidden sm:h-6 sm:w-6 sm:min-w-6",j?"":"sm:group-hover:flex",t===a?"flex":"hidden"),onClick:e=>{e.preventDefault(),e.stopPropagation(),f(!0)},children:(0,s.jsx)(x.Z,{className:"h-5 w-5 fill-accent-foreground sm:h-4 sm:w-4"})})]})]})}function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var C=function(e){return j.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),r||(r=j.createElement("path",{d:"m21.86 21.153-4.162-4.162A8.97 8.97 0 0 0 20 11a9 9 0 1 0-9 9 8.97 8.97 0 0 0 5.99-2.302l4.162 4.162a.5.5 0 0 0 .707-.707M11 19a8 8 0 0 1 0-16 8.01 8.01 0 0 1 8 8 8 8 0 0 1-8 8"})))},_=a(9680),R=a(56288),D=a(40261);function E(e){let{initialLastChats:t}=e,a=(0,d.useTranslations)("Chat"),n=(0,u.useRouter)(),r=(0,u.useParams)(),g=_.o.use.sidePanelChatMode(),x=_.o.use.setSidePanelChatMode(),v=(0,m.useRef)(null),[b,j]=m.useState(""),[y,N]=(0,h.nj)(b,500),A=(0,m.useMemo)(()=>"history"===g?{chatVisibility:"private",chatPermission:"write"}:"shared"===g?{chatVisibility:"public",chatPermission:"read-only"}:"archived"===g?{chatVisibility:"private",chatPermission:"read-only"}:{},[g]),k=c.api.chat.last.useInfiniteQuery(A,{initialData:"history"===g?{pages:[t],pageParams:[void 0]}:void 0,getNextPageParam:e=>e.nextCursor}),E=c.api.chat.search.useInfiniteQuery({query:y,...A},{enabled:y.trim().length>0}),O=b.trim().length>0?E.data:k.data,L=new Date;L.setHours(0,0,0,0);let z=new Date(L);z.setDate(L.getDate()-1);let M=new Date(L);M.setDate(L.getDate()-7);let S=new Date(L);S.setMonth(L.getMonth()-1);let B=((null==O?void 0:O.pages.flatMap(e=>e.items))||[]).sort((e,t)=>t.updatedAt-e.updatedAt).reduce((e,t)=>(t.updatedAt>L?e.today.push(t):t.updatedAt>z?e.yesterday.push(t):t.updatedAt>M?e.last_week.push(t):t.updatedAt>S?e.last_month.push(t):e.older.push(t),e),{today:[],yesterday:[],last_week:[],last_month:[],older:[]}),U=c.api.useUtils(),T=c.api.chat.delete.useMutation({async onMutate(e){await U.chat.last.cancel(A);let t=U.chat.last.getInfiniteData(A);return U.chat.last.setInfiniteData(A,t=>{if(t)return(0,D.FG)(t,t=>t.id===e.id)}),{prevData:t}},onSuccess(e,t,a){r.chatId===t.id&&n.push("/chat")},onError(e,t,a){U.chat.last.setInfiniteData(A,null==a?void 0:a.prevData)},onSettled(){U.chat.last.invalidate(A)}}),Z=c.api.chat.setPermission.useMutation({async onMutate(e){await U.chat.last.cancel(A);let t=U.chat.last.getInfiniteData(A);return U.chat.last.setInfiniteData(A,t=>{if(t)return(0,D.FG)(t,t=>t.id===e.id)}),{prevData:t}},onSuccess(e,t,s){"read-only"===t.permission?R.Am.success(a("left_panel.archive_success_toast")):"write"===t.permission&&R.Am.success(a("left_panel.restore_success_toast")),r.chatId===t.id&&n.push("/chat")},onError(e,t,a){U.chat.last.setInfiniteData(A,null==a?void 0:a.prevData)},onSettled(){U.chat.last.invalidate(A)}});(0,m.useEffect)(()=>{N(b)},[b]);let H=(0,m.useCallback)(()=>{v.current&&v.current.clientHeight+v.current.scrollTop>v.current.scrollHeight-100&&(b.trim().length>0&&E.hasNextPage&&!E.isFetchingNextPage?E.fetchNextPage():k.hasNextPage&&!k.isFetchingNextPage&&k.fetchNextPage())},[k,E,b]);return(0,m.useEffect)(()=>{v.current&&H()},[O,H]),(0,s.jsxs)("div",{className:"flex min-h-0 w-full flex-1 flex-col items-start justify-start gap-4",children:[(0,s.jsx)("div",{className:"w-full px-2",children:(0,s.jsxs)("div",{className:"relative h-fit w-full",children:[(0,s.jsx)(f.I,{value:b,onChange:e=>j(e.target.value),placeholder:a("left_panel.search_placeholder"),className:"h-9 w-full rounded-lg border-0 bg-accent py-2 pl-2 pr-7"}),b.trim().length>0?E.isLoading?(0,s.jsx)("div",{className:"pointer-events-none absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 transform",children:(0,s.jsx)(l.Z,{className:"h-4 w-4 animate-spin text-muted-foreground",strokeWidth:1})}):(0,s.jsx)(o.z,{"aria-label":"Clear search",variant:"ghost",className:"absolute right-2 top-1/2 h-5 w-5 -translate-y-1/2 rounded-full p-0",onClick:()=>j(""),children:(0,s.jsx)(w.Z,{className:"h-4 w-4 fill-muted-foreground"})}):(0,s.jsx)(C,{className:"pointer-events-none absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 transform fill-muted-foreground"})]})}),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col items-start justify-start gap-3 overflow-y-hidden",children:[["archived","shared"].includes(g)&&(0,s.jsx)("div",{className:"min-h-8 w-full px-4",children:(0,s.jsxs)(o.z,{variant:"ghost",size:"sm",className:"flex h-8 w-full flex-row items-center justify-start gap-2 p-0 hover:bg-transparent hover:text-accent",onClick:()=>x("history"),children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground",strokeWidth:1}),(0,s.jsx)("p",{className:"w-full flex-1 text-start text-xs font-medium text-muted-foreground",children:a("left_panel.back_to_history")})]})}),(0,s.jsx)("div",{className:"flex w-full flex-col items-start gap-1 overflow-y-auto px-2",ref:v,onScroll:H,children:Object.entries(B).map((e,t)=>{let[n,l]=e;return(0,s.jsxs)(m.Fragment,{children:[(l||[]).length>0&&(0,s.jsx)("p",{className:(0,p.cn)("mb-1 w-full px-2 text-xs font-semibold text-muted-foreground",t>0&&"mt-3"),children:a("left_panel.".concat(n))}),(l||[]).map(e=>(0,s.jsx)(P,{currentChatId:r.chatId,targetChatId:e.id,title:e.title,content:e.content,onArchive:"history"===g?()=>Z.mutate({id:e.id,permission:"read-only"}):void 0,onRestore:"archived"===g?()=>Z.mutate({id:e.id,permission:"write"}):void 0,onDelete:()=>T.mutate({id:e.id})},e.id))]},t)})})]})]})}},17711:function(e,t,a){"use strict";a.r(t),a.d(t,{Container:function(){return l}});var n=a(57437),r=a(98383),s=a(65950);function l(e){let{children:t}=e,a=r.zw.use.openSidePanel(),l=r.zw.use.setOpenSidePanel();return(0,n.jsxs)("div",{className:(0,s.cn)("absolute left-0 z-50 h-[calc(100dvh)] transition-all sm:relative",a?"max-w-[240px]":"max-w-0"),onClick:()=>l(!1),children:[a&&(0,n.jsx)("div",{className:"absolute left-0 top-0 h-[calc(100dvh)] w-screen bg-black/10 sm:hidden"}),(0,n.jsx)("div",{className:(0,s.cn)("relative h-full w-60 border-r bg-background py-4 shadow-md transition-all sm:min-w-60 sm:shadow-none",a?"left-0":"-left-[240px]"),onClick:e=>e.stopPropagation(),children:t})]})}},99975:function(e,t,a){"use strict";a.r(t),a.d(t,{ToggleButton:function(){return i}});var n=a(57437),r=a(49108),s=a(575),l=a(98383);function i(){let e=l.zw.use.toggleSidePanel();return(0,n.jsx)(s.z,{"aria-label":"Toggle menu",variant:"ghost",className:"m-0 block h-8 w-8 p-0 text-primary hover:bg-background hover:text-primary sm:hidden",onClick:()=>e(),children:(0,n.jsx)(r.Z,{className:"h-6 w-6 text-primary",strokeWidth:1})})}},83675:function(e,t,a){"use strict";a.r(t),a.d(t,{UserNav:function(){return H}});var n,r,s,l=a(57437),i=a(30553),o=a(11775),c=a(47367),u=a(52846);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var f=function(e){return u.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),n||(n=u.createElement("path",{d:"M4 12a.5.5 0 0 0 .5.5h8.793l-2.647 2.646a.5.5 0 1 0 .707.708l3.5-3.5a.5.5 0 0 0 0-.707l-3.5-3.5a.5.5 0 0 0-.707.707l2.647 2.646H4.5a.5.5 0 0 0-.5.5M17.5 2h-11A2.5 2.5 0 0 0 4 4.5v4a.5.5 0 0 0 1 0v-4C5 3.672 5.672 3 6.5 3h11c.828 0 1.5.672 1.5 1.5v15c0 .828-.672 1.5-1.5 1.5h-11c-.828 0-1.5-.672-1.5-1.5v-4a.5.5 0 0 0-1 0v4A2.5 2.5 0 0 0 6.5 22h11a2.5 2.5 0 0 0 2.5-2.5v-15A2.5 2.5 0 0 0 17.5 2"})))};function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var h=function(e){return u.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),r||(r=u.createElement("path",{d:"M12 8a.5.5 0 0 0 0 1 3 3 0 1 1 0 6 .5.5 0 0 0 0 1 4 4 0 1 0 0-8m9.546 3.646L19 9.101V5.499A.5.5 0 0 0 18.5 5h-3.6l-2.547-2.546a.5.5 0 0 0-.707 0L9.101 5H5.499A.5.5 0 0 0 5 5.5v3.6l-2.546 2.547a.5.5 0 0 0 0 .707L5 14.899v3.602a.5.5 0 0 0 .5.499h3.6l2.546 2.546a.5.5 0 0 0 .708 0L14.899 19h3.602a.5.5 0 0 0 .499-.5v-3.6l2.546-2.547a.5.5 0 0 0 0-.707m-3.4 2.693a.5.5 0 0 0-.146.353V18h-3.308a.5.5 0 0 0-.353.146L12 20.486l-2.339-2.34A.5.5 0 0 0 9.308 18H6v-3.308a.5.5 0 0 0-.146-.353L3.514 12l2.34-2.339A.5.5 0 0 0 6 9.308V6h3.308a.5.5 0 0 0 .353-.146L12 3.514l2.339 2.34a.5.5 0 0 0 .353.146H18v3.308a.5.5 0 0 0 .146.353L20.486 12z"})))};function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var p=function(e){return u.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),s||(s=u.createElement("path",{d:"M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7m0 6a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m9.158-4.475-1.887-.629a.5.5 0 0 1-.29-.697l.891-1.778a.5.5 0 0 0-.094-.577l-2.12-2.122a.5.5 0 0 0-.578-.094l-1.78.89a.5.5 0 0 1-.697-.29l-.628-1.886A.5.5 0 0 0 13.5 2.5h-3a.5.5 0 0 0-.474.342l-.63 1.887a.5.5 0 0 1-.282.303.49.49 0 0 1-.415-.014l-1.779-.89a.5.5 0 0 0-.577.094L4.222 6.344a.5.5 0 0 0-.094.577l.89 1.778q.016.033.027.067a.5.5 0 0 1-.316.63l-1.887.63a.5.5 0 0 0-.342.474v3c0 .215.138.406.342.475l1.886.629a.5.5 0 0 1 .29.697l-.89 1.778a.5.5 0 0 0 .094.577l2.121 2.122c.153.152.385.19.577.094l1.779-.89a.48.48 0 0 1 .415-.014.5.5 0 0 1 .283.303l.629 1.887a.5.5 0 0 0 .474.342h3a.5.5 0 0 0 .475-.342l.629-1.887a.5.5 0 0 1 .697-.29l1.78.891a.5.5 0 0 0 .576-.094l2.121-2.122a.5.5 0 0 0 .094-.577l-.89-1.778a.497.497 0 0 1 .29-.697l1.886-.63a.5.5 0 0 0 .342-.474v-3a.5.5 0 0 0-.342-.475M20.5 13.14l-1.545.514q-.101.035-.196.081a1.5 1.5 0 0 0-.671 2.013l.728 1.456-1.61 1.612-1.458-.728a1.498 1.498 0 0 0-2.094.867L13.14 20.5h-2.28l-.515-1.545a1.5 1.5 0 0 0-2.094-.867l-1.456.728-1.611-1.612.728-1.456q.048-.095.081-.195a1.5 1.5 0 0 0-.949-1.899L3.5 13.14v-2.28l1.545-.514a1.503 1.503 0 0 0 .867-2.094l-.728-1.456 1.611-1.612 1.456.728q.096.048.196.081a1.5 1.5 0 0 0 1.898-.948L10.86 3.5h2.28l.514 1.545a1.498 1.498 0 0 0 2.094.867l1.457-.728 1.611 1.612-.728 1.456q-.048.096-.082.198a1.5 1.5 0 0 0 .95 1.896l1.544.514z"})))},x=a(38313),v=a(31062),w=a(30982),b=a(575),j=a(2265),y=a(18913),N=a(37805),A=a(80037),P=a(37501),k=a(65950);let C=y.fC,_=y.xz,R=y.ZA;y.Uv,y.Tr,y.Ee,j.forwardRef((e,t)=>{let{className:a,inset:n,children:r,...s}=e;return(0,l.jsxs)(y.fF,{ref:t,className:(0,k.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",a),...s,children:[r,(0,l.jsx)(N.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=y.fF.displayName,j.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(y.tu,{ref:t,className:(0,k.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=y.tu.displayName;let D=j.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,l.jsx)(y.Uv,{children:(0,l.jsx)(y.VY,{ref:t,sideOffset:n,className:(0,k.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});D.displayName=y.VY.displayName;let E=j.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,l.jsx)(y.ck,{ref:t,className:(0,k.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",a),...r})});E.displayName=y.ck.displayName,j.forwardRef((e,t)=>{let{className:a,children:n,checked:r,...s}=e;return(0,l.jsxs)(y.oC,{ref:t,className:(0,k.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...s,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(y.wU,{children:(0,l.jsx)(A.Z,{className:"h-4 w-4"})})}),n]})}).displayName=y.oC.displayName,j.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,l.jsxs)(y.Rk,{ref:t,className:(0,k.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(y.wU,{children:(0,l.jsx)(P.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=y.Rk.displayName;let O=j.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,l.jsx)(y.__,{ref:t,className:(0,k.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...r})});O.displayName=y.__.displayName;let L=j.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(y.Z0,{ref:t,className:(0,k.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});L.displayName=y.Z0.displayName;var z=a(75808),M=a(47907),S=a(91774),B=a(8792),U=a(27367),T=a(32414),Z=a(9680);function H(e){let{user:t,role:a,organization:n,organizationsAvailable:r}=e,s=(0,w.useTranslations)("Chat"),u=(0,M.useRouter)(),{theme:d,setTheme:m}=(0,S.F)(),g=Z.o.use.setSidePanelChatMode(),j=T.api.session.setActiveOrganization.useMutation(),y=e=>{j.mutate({id:e},{onSuccess:()=>{u.push("/"),u.refresh()}})};return(0,l.jsxs)(C,{children:[(0,l.jsx)(_,{asChild:!0,children:(0,l.jsxs)(b.z,{"aria-label":"User settings",variant:"ghost",className:"relative m-0 h-14 w-full justify-start rounded-lg p-2 hover:bg-accent",children:[(0,l.jsx)(z.qE,{className:"h-8 w-8",children:(0,l.jsx)(z.Q5,{children:(0,k.Q)(t.name)})}),(0,l.jsxs)("div",{className:"ml-3 flex-grow overflow-hidden text-left",children:[(0,l.jsx)("p",{className:"block max-w-40 truncate text-sm font-medium leading-none",children:t.name}),(0,l.jsx)("p",{className:"mt-0.5 block max-w-40 truncate text-xs font-normal text-muted-foreground",children:s("user_nav.organization_name",{name:n.name,userName:t.name})})]}),(0,l.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground",strokeWidth:1})]})}),(0,l.jsxs)(D,{className:"w-52",align:"start",forceMount:!0,children:[(0,l.jsx)(O,{className:"font-normal",children:(0,l.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium leading-none",children:t.name}),(0,l.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),(0,l.jsx)(L,{}),(0,l.jsx)(O,{className:"text-xs font-semibold text-stone-600 dark:text-stone-200",children:s("user_nav.organization_name",{name:n.name,userName:t.name})}),r.filter(e=>e.id!=n.id).map(e=>(0,l.jsxs)(E,{onClick:()=>y(e.id),className:"flex flex-row justify-between text-xs  text-muted-foreground",children:[s("user_nav.switch_to",{name:e.name,userName:t.name}),(0,l.jsx)(o.Z,{className:"h-4 w-4",strokeWidth:1})]},e.id)),(0,l.jsx)(L,{}),(0,l.jsxs)(R,{children:[(0,l.jsxs)(E,{className:"flex flex-row justify-between",onClick:()=>g("shared"),children:[s("user_nav.shared_chats_button"),(0,l.jsx)(x.Z,{className:"h-4 w-4 fill-muted-foreground"})]}),(0,l.jsxs)(E,{className:"flex flex-row justify-between",onClick:()=>g("archived"),children:[s("user_nav.arhived_chats_button"),(0,l.jsx)(v.Z,{className:"h-4 w-4 fill-muted-foreground"})]})]}),(0,l.jsx)(L,{}),(0,l.jsxs)(R,{children:[(0,l.jsxs)(E,{className:"flex flex-row justify-between",onClick:()=>m("light"===d?"dark":"light"),children:[s("user_nav.toggle_theme_button"),(0,l.jsx)(h,{className:"h-4 w-4 fill-muted-foreground"})]}),(0,l.jsx)(B.default,{"aria-label":"Profile",target:"_blank",href:"".concat(U.O.NEXT_PUBLIC_DASHBOARD_URL,"/profile/"),children:(0,l.jsxs)(E,{className:"flex flex-row justify-between",children:[s("user_nav.profile_button"),(0,l.jsx)(p,{className:"h-4 w-4 fill-muted-foreground"})]})})]}),(0,l.jsx)(L,{}),window.Intercom&&(0,l.jsxs)(E,{id:"help-button-navbar",className:"flex w-full flex-row justify-between",children:[s("user_nav.help_button"),(0,l.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground",strokeWidth:"1"})]}),(0,l.jsxs)(E,{className:"flex w-full flex-row justify-between",onClick:()=>window.location.href="/logout",children:[s("user_nav.logout_button"),(0,l.jsx)(f,{className:"h-4 w-4 fill-muted-foreground"})]})]})]})}},75808:function(e,t,a){"use strict";a.d(t,{Q5:function(){return o},qE:function(){return i}});var n=a(57437),r=a(2265),s=a(12178),l=a(65950);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});i.displayName=s.fC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",a),...r})}).displayName=s.Ee.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-[#CA8E7B] text-xs font-medium text-white dark:bg-muted",a),...r})});o.displayName=s.NY.displayName},575:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return c}});var n=a(57437),r=a(2265),s=a(59143),l=a(57742),i=a(65950);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-auto disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",success:"bg-green-500/50 text-green-500 hover:bg-green-500/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:c=!1,...u}=e,d=c?s.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(o({variant:r,size:l,className:a})),ref:t,...u})});c.displayName="Button"},22782:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var n=a(57437),r=a(2265),s=a(65950);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,n.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},9680:function(e,t,a){"use strict";a.d(t,{o:function(){return l}});var n=a(22020),r=a(72323);let s=(0,n.Ue)()((e,t)=>({openUsageLimitDialog:!1,setOpenUsageLimitDialog:t=>e(e=>({openUsageLimitDialog:t})),openShareDialog:!1,setOpenShareDialog:t=>e(e=>({openShareDialog:t})),sidePanelChatMode:"history",setSidePanelChatMode:t=>e(e=>({sidePanelChatMode:t})),usageLimitReached:!1,usageLimitResetTime:null,setUsageLimitReached:a=>{e(()=>({usageLimitReached:!0,usageLimitResetTime:a}));let n=()=>{0==t().usageLimitResetTime?e(()=>({usageLimitReached:!1,usageLimitResetTime:null})):(e(e=>({usageLimitReached:!0,usageLimitResetTime:e.usageLimitResetTime-1})),setTimeout(n,1e3))};setTimeout(n,1e3)},chatDebugData:[],addChatDebugData:(t,a)=>e(e=>({chatDebugData:[...e.chatDebugData,{name:t,value:a}]})),resetChatDebugData:()=>e(()=>({chatDebugData:[]}))})),l=(0,r.N)(s)},98383:function(e,t,a){"use strict";a.d(t,{Fi:function(){return r},Q6:function(){return c},vP:function(){return o},zw:function(){return d}});var n,r,s=a(22020),l=a(72323),i=a(65249);function o(e){return Object.values(r).includes(e)}(n=r||(r={})).LARGE="mistral-large",n.LARGE_V2="mistral-large-2407",n.NEXT="mistral-next",n.SMALL="mistral-small",n.CODESTRAL="codestral",n.NEMO="mistral-nemo",n.PIXTRAL="pixtral-12b-2409";let c="mistral-large-2407",u=(0,s.Ue)()((0,i.tJ)((e,t)=>({isLoaded:!1,setIsLoaded:t=>e({isLoaded:t}),openSidePanel:!1,toggleSidePanel:()=>e(e=>({openSidePanel:!e.openSidePanel})),setOpenSidePanel:t=>e({openSidePanel:t}),selectedModel:c,setSelectedModel:t=>e({selectedModel:t}),defaultRag:!1,setDefaultRag:t=>e({defaultRag:t}),featureConversationBranchesAck:!1,setFeatureConversationBranchesAck:()=>e({featureConversationBranchesAck:!0})}),{name:"persistent-store"})),d=(0,l.N)(u)},72323:function(e,t,a){"use strict";a.d(t,{N:function(){return n}});let n=e=>{for(let t of(e.use={},Object.keys(e.getState())))e.use[t]=()=>e(e=>e[t]);return e}},32414:function(e,t,a){"use strict";a.r(t),a.d(t,{TRPCReactProvider:function(){return h},api:function(){return f},apiWithoutReact:function(){return m}});var n=a(57437),r=a(89057),s=a(64095),l=a(68953),i=a(67480),o=a(2265),c=a(75047);a(49079);let u=c.ZP;function d(){return"/api/trpc"}let f=(0,i.ec)(),m=(0,l.K5)({transformer:u,links:[(0,l.gb)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,l.N8)({url:d(),fetch:async(e,t)=>{let a=await fetch(e,t);return 401===a.status&&window&&window.location.reload(),a}})]});function h(e){let[t]=(0,o.useState)(()=>new r.S({defaultOptions:{queries:{refetchOnWindowFocus:!1}}})),[a]=(0,o.useState)(()=>f.createClient({transformer:u,links:[(0,l.gb)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,l.N8)({url:d(),fetch:async(e,t)=>{let a=await fetch(e,t);return 401===a.status&&window&&window.location.reload(),a}})]}));return(0,n.jsx)(s.aH,{client:t,children:(0,n.jsx)(f.Provider,{client:a,queryClient:t,children:e.children})})}},65950:function(e,t,a){"use strict";a.d(t,{Q:function(){return l},T:function(){return i},cn:function(){return s}});var n=a(75504),r=a(51367);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}let l=e=>e.split(" ").map(e=>(e[0]||"").toUpperCase()).join("");async function i(e){try{if("clipboard"in navigator)return await navigator.clipboard.writeText(e);return document.execCommand("copy",!0,e)}catch(e){}}},40261:function(e,t,a){"use strict";a.d(t,{FG:function(){return r},I3:function(){return n}});let n=(e,t,a)=>({pageParams:e.pageParams,pages:e.pages.map(e=>({...e,items:e.items.map(e=>t(e)?a(e):e)}))}),r=(e,t)=>({pageParams:e.pageParams,pages:e.pages.map(e=>({...e,items:e.items.filter(e=>!t(e))}))})},84546:function(e,t,a){"use strict";a.r(t),t.default={src:"/_next/static/media/le-chat-logo-large-dark.0cc8651d.png",height:504,width:1717,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASUlEQVR4nGP8sy79AuP7d68Y+D/ufBu8cy3n4xts/9m4pRkYGDiA+DTj756a7Qxsfz8z3nu+53PH5KfMb17zMbCwvAJKngTibwAEwxyRLtqGmAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2}},58051:function(e,t,a){"use strict";a.r(t),t.default={src:"/_next/static/media/le-chat-logo-large-light.b98da676.png",height:504,width:1717,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAARklEQVR4nGN82c92nv3Hv3cs4v838iTJb422/s5y8CGTHAMEHGO868C5iUng71fep0zbRW6JPrHn/8t59x8jB1CSC4j3AQBxWhfPfokvowAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2}}},function(e){e.O(0,[363,62,807,750,368,749,249,263,537,765,971,884,744],function(){return e(e.s=86847)}),_N_E=e.O()}]);